<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEON TERMINAL V3</title>
    <style>
        /* --- CSS: NEON & CRT TASARIMI --- */
        :root {
            --neon-color: #0f0; /* Ana yeşil neon */
            --neon-glow: #00ff41;
            --bg-color: #050505;
            --screen-flicker-opacity: 0.15;
        }

        body {
            background-color: var(--bg-color);
            color: var(--neon-color);
            font-family: 'Courier New', Courier, monospace;
            margin: 0;
            height: 100vh;
            overflow: hidden; /* Scrollbar'ı gizle, içeriden kaydıracağız */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* CRT Ekran Çerçevesi */
        #monitor {
            width: 100%;
            height: 100%;
            position: relative;
            overflow: hidden;
            background: radial-gradient(circle, #112 0%, #000 100%);
            box-shadow: inset 0 0 5rem rgba(0,0,0,0.75);
        }

        /* Tarama Çizgileri (Scanlines) */
        #monitor::before {
            content: " ";
            display: block;
            position: absolute;
            top: 0; left: 0; bottom: 0; right: 0;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            background-size: 100% 2px, 3px 100%;
            z-index: 10;
            pointer-events: none;
        }

        /* Ekran Titreme Animasyonu */
        @keyframes flicker {
            0% { opacity: 0.97; }
            5% { opacity: 0.95; }
            10% { opacity: 0.9; }
            15% { opacity: 0.95; }
            20% { opacity: 0.99; }
            50% { opacity: 0.95; }
            55% { opacity: 0.9; }
            60% { opacity: 0.95; }
            100% { opacity: 0.98; }
        }

        #screen-content {
            height: 100%;
            padding: 30px;
            box-sizing: border-box;
            overflow-y: auto;
            animation: flicker 0.15s infinite;
            text-shadow: 0 0 2px var(--neon-glow), 0 0 10px var(--neon-color); /* NEON PARLAMA */
            position: relative;
            z-index: 5;
        }

        /* Scrollbar gizleme */
        #screen-content::-webkit-scrollbar { width: 0px; }

        .output-line {
            margin-bottom: 5px;
            white-space: pre-wrap;
            line-height: 1.5;
            font-size: 18px;
        }

        .input-area {
            display: flex;
            align-items: center;
            margin-top: 10px;
            opacity: 0; /* Başlangıçta gizli, boot bitince açılacak */
            transition: opacity 0.5s;
        }

        .prompt {
            color: #d300c4; /* Neon Pembe */
            text-shadow: 0 0 5px #d300c4;
            margin-right: 10px;
            font-weight: bold;
        }

        input[type="text"] {
            background: transparent;
            border: none;
            color: #fff;
            font-family: inherit;
            font-size: 18px;
            flex-grow: 1;
            outline: none;
            text-shadow: 0 0 5px #fff;
            caret-color: var(--neon-color);
            text-transform: lowercase;
        }

        /* Renk Sınıfları */
        .dir { color: #00e5ff; text-shadow: 0 0 5px #00e5ff; font-weight: bold; } /* Neon Mavi */
        .file { color: #fff; }
        .error { color: #ff3333; text-shadow: 0 0 5px #ff0000; }
        .system { color: #ffaa00; text-shadow: 0 0 5px #ffaa00; }
        
        /* Başlangıç Ekranı */
        #start-overlay {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 999;
            cursor: pointer;
        }
        #start-text {
            font-size: 24px;
            animation: blink 1s infinite;
            text-align: center;
        }
        @keyframes blink { 50% { opacity: 0; } }

    </style>
</head>
<body>

    <div id="start-overlay">
        <div id="start-text">
            [ SİSTEMİ BAŞLATMAK İÇİN TIKLAYIN ]
        </div>
    </div>

    <div id="monitor">
        <div id="screen-content">
            <div id="history"></div>
            <div class="input-area" id="input-line">
                <span class="prompt" id="promptLabel">user@neon:~$</span>
                <input type="text" id="commandInput" autocomplete="off">
            </div>
        </div>
    </div>

    <script>
        /* --- SİSTEM YAPILANDIRMASI --- */
        const fileSystem = {
            "root": {
                "readme.txt": "Neon Terminal v3'e hoşgeldiniz. Bu sistem HTML/JS ile çalışır.",
                "projeler": {
                    "cyber_security": {
                        "port_scanner.exe": "Erişim Reddedildi. (Yetki: Admin)",
                        "log.txt": "Tarama tamamlandı: 192.168.1.1"
                    },
                    "web": {
                        "site.html": "<html><body>Hello World</body></html>"
                    }
                },
                "gizli": {
                    "passwords.txt": "admin: 123456\nroot: toor"
                }
            }
        };

        // Değişkenler
        let currentPath = [];
        let commandHistory = [];
        let historyIndex = -1;
        let isBooting = true;
        let audioCtx;

        // DOM Elemanları
        const input = document.getElementById('commandInput');
        const historyDiv = document.getElementById('history');
        const promptLabel = document.getElementById('promptLabel');
        const inputArea = document.getElementById('input-line');
        const screenContent = document.getElementById('screen-content');
        const startOverlay = document.getElementById('start-overlay');

        /* --- SES EFEKTLERİ --- */
        function initAudio() {
            audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        }

        function playSound(type) {
            if (!audioCtx) return;
            if (audioCtx.state === 'suspended') audioCtx.resume();

            const osc = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            osc.connect(gainNode);
            gainNode.connect(audioCtx.destination);

            if (type === 'key') {
                // Tuş sesi (mekanik tık)
                osc.type = 'square';
                osc.frequency.setValueAtTime(600, audioCtx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(100, audioCtx.currentTime + 0.05);
                gainNode.gain.setValueAtTime(0.03, audioCtx.currentTime);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.05);
            } else if (type === 'enter') {
                // Enter sesi (dijital bip)
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(800, audioCtx.currentTime);
                gainNode.gain.setValueAtTime(0.05, audioCtx.currentTime);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.1);
            } else if (type === 'error') {
                // Hata sesi
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(150, audioCtx.currentTime);
                gainNode.gain.setValueAtTime(0.1, audioCtx.currentTime);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.3);
            }
        }

        /* --- BOOT SİSTEMİ --- */
        startOverlay.addEventListener('click', () => {
            startOverlay.style.display = 'none';
            initAudio();
            bootSequence();
        });

        async function bootSequence() {
            const bootTexts = [
                "SYSTEM BOOT SEQUENCE INITIATED...",
                "LOADING KERNEL... [OK]",
                "MOUNTING FILE SYSTEM... [OK]",
                "CHECKING MEMORY... 1024TB DETECTED",
                "LOADING NEON INTERFACE v3.0...",
                "CONNECTING TO SERVER... SUCCESS",
                "----------------------------------------",
                "NEON OS READY."
            ];

            for (let text of bootTexts) {
                await new Promise(r => setTimeout(r, 200)); // Gecikme
                printToScreen(text, "system");
                playSound('key');
            }
            
            // Input alanını göster
            isBooting = false;
            inputArea.style.opacity = 1;
            input.focus();
        }

        /* --- TEMEL FONKSİYONLAR --- */
        function getCurrentDirObject() {
            let current = fileSystem["root"];
            for (let folder of currentPath) {
                if(current[folder]) {
                    current = current[folder];
                } else {
                    return null; // Yol bozuksa
                }
            }
            return current;
        }

        function updatePrompt() {
            const pathStr = currentPath.length === 0 ? "~" : "~/" + currentPath.join("/");
            promptLabel.innerText = `user@neon:${pathStr}$`;
        }

        function printToScreen(text, className = "") {
            const div = document.createElement('div');
            div.className = "output-line " + className;
            div.innerHTML = text.replace(/\n/g, "<br>");
            historyDiv.appendChild(div);
            // Otomatik aşağı kaydır
            screenContent.scrollTop = screenContent.scrollHeight;
        }

        /* --- OLAY DİNLEYİCİLERİ --- */
        document.addEventListener('click', () => {
            if (!isBooting) input.focus();
        });

        input.addEventListener('keydown', function(e) {
            if (isBooting) return;

            // Tuş sesi
            if (e.key !== 'Enter') playSound('key');

            // Tab (Otomatik Tamamlama)
            if (e.key === 'Tab') {
                e.preventDefault();
                const val = input.value.trim();
                const args = val.split(" ");
                const lastWord = args[args.length - 1];

                const currentDir = getCurrentDirObject();
                const files = currentDir ? Object.keys(currentDir) : [];
                const commands = ['ls', 'cd', 'cat', 'clear', 'help', 'matrix', 'pwd'];
                
                const possibilities = [...commands, ...files];
                const match = possibilities.find(p => p.startsWith(lastWord));

                if (match) {
                    args[args.length - 1] = match;
                    input.value = args.join(" ");
                }
            }

            // Enter (Komut Gönder)
            if (e.key === 'Enter') {
                const rawCmd = input.value;
                if (!rawCmd) return;
                
                printToScreen(promptLabel.innerText + " " + rawCmd);
                commandHistory.push(rawCmd);
                historyIndex = commandHistory.length;
                
                const parts = rawCmd.trim().split(" ");
                const cmd = parts[0].toLowerCase();
                const args = parts.slice(1);
                
                processCommand(cmd, args);
                input.value = "";
                playSound('enter');
            }

            // Geçmiş (Yukarı/Aşağı Ok)
            if (e.key === 'ArrowUp') {
                if (historyIndex > 0) {
                    historyIndex--;
                    input.value = commandHistory[historyIndex];
                }
                e.preventDefault();
            } else if (e.key === 'ArrowDown') {
                if (historyIndex < commandHistory.length - 1) {
                    historyIndex++;
                    input.value = commandHistory[historyIndex];
                } else {
                    historyIndex = commandHistory.length;
                    input.value = "";
                }
                e.preventDefault();
            }
        });

        /* --- KOMUT MANTIĞI --- */
        function processCommand(cmd, args) {
            const currentDir = getCurrentDirObject();
            if (!currentDir) {
                printToScreen("Kritik Hata: Dosya sistemi yolu bozuk.", "error");
                currentPath = [];
                updatePrompt();
                return;
            }

            switch(cmd) {
                case 'help':
                    printToScreen("KOMUTLAR: ls, cd, cat, clear, pwd, matrix, help", "system");
                    break;
                
                case 'ls':
                    const items = Object.keys(currentDir);
                    if (items.length === 0) {
                        printToScreen("(boş)", "system");
                    } else {
                        let output = "";
                        items.forEach(item => {
                            if (typeof currentDir[item] === 'object') {
                                output += `<span class='dir'>${item}/</span>  `;
                            } else {
                                output += `<span class='file'>${item}</span>  `;
                            }
                        });
                        printToScreen(output);
                    }
                    break;

                case 'cd':
                    const target = args[0];
                    if (!target) return;
                    
                    if (target === "..") {
                        if (currentPath.length > 0) currentPath.pop();
                    } else if (currentDir[target] && typeof currentDir[target] === 'object') {
                        currentPath.push(target);
                    } else {
                        playSound('error');
                        printToScreen(`Hata: '${target}' bir klasör değil.`, "error");
                    }
                    updatePrompt();
                    break;

                case 'cat':
                    const file = args[0];
                    if (currentDir[file] && typeof currentDir[file] === 'string') {
                        printToScreen(currentDir[file]);
                    } else {
                        playSound('error');
                        printToScreen("Hata: Dosya okunamadı.", "error");
                    }
                    break;

                case 'clear':
                    historyDiv.innerHTML = "";
                    break;
                
                case 'pwd':
                    printToScreen("/root/" + currentPath.join("/"));
                    break;

                case 'matrix':
                    printToScreen("Matrix modu aktif ediliyor... (Durdurmak için sayfayı yenile)", "system");
                    startMatrixEffect();
                    break;

                default:
                    playSound('error');
                    printToScreen(`Komut bulunamadı: ${cmd}`, "error");
            }
        }

        /* --- MATRIX EFEKTİ (BONUS) --- */
        function startMatrixEffect() {
            const canvas = document.createElement('canvas');
            canvas.style.position = 'fixed';
            canvas.style.top = '0';
            canvas.style.left = '0';
            canvas.style.width = '100%';
            canvas.style.height = '100%';
            canvas.style.zIndex = '998'; // Yazıların altında, arkaplanın üstünde
            canvas.style.opacity = '0.3';
            document.body.appendChild(canvas);

            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            const katakana = 'アァカサタナハマヤャラワガザダバパイィキシチニヒミリヂビピウゥクスツヌフムユュルグズブヅプエェケセテネヘメレゲゼデベペオォコソトノホモヨョロヲゴゾドボポヴッン';
            const latin = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            const alphabet = katakana + latin;

            const fontSize = 16;
            const columns = canvas.width / fontSize;
            const drops = [];

            for(let x = 0; x < columns; x++) drops[x] = 1;

            function draw() {
                ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                ctx.fillStyle = '#0F0';
                ctx.font = fontSize + 'px monospace';

                for(let i = 0; i < drops.length; i++) {
                    const text = alphabet.charAt(Math.floor(Math.random() * alphabet.length));
                    ctx.fillText(text, i*fontSize, drops[i]*fontSize);

                    if(drops[i]*fontSize > canvas.height && Math.random() > 0.975)
                        drops[i] = 0;
                    
                    drops[i]++;
                }
            }
            setInterval(draw, 30);
        }
    </script>
</body>
</html>
